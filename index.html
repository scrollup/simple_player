<!DOCTYPE html>
<html>
<head>
    <title>Audio Playlist</title>
</head>
<body>
    <h1>Audio Playlist</h1>
    
    <audio id="audioPlayer" controls>
        Your browser does not support the audio element.
    </audio>
    
    <p>Currently Playing: <span id="currentTrack">Audio 1</span></p>
    
    <ul id="playlist">
    </ul>

    <button id="stopAutoPlay">Stop Auto Play</button>

    <script>
        const playlist = document.getElementById("playlist");
        const audioPlayer = document.getElementById("audioPlayer");
        const currentTrackElement = document.getElementById("currentTrack");
        const stopAutoPlayButton = document.getElementById("stopAutoPlay");

        let currentTrack = 0;
        let audioFiles = [];
        let autoPlay = true;

        // Replace this with your JSON data containing paths and titles
        const jsonPlaylist = [
        {
                path: "5-04 Lech Lecha-1 04.mp3",
                title: "Lech Lecha 4"
            },
            {
                path: "6-01 Lech Lecha-2 01.mp3",
                title: "Lech Lecha 5"
            },
            {
                path: "6-02 Lech Lecha-2 02.mp3",
                title: "Lech Lecha 6"
            },
            {
                path: "6-03 Lech Lecha-2 03.mp3",
                title: "Lech Lecha 7"
            },
            {
                path: "6-04 Lech Lecha-2 04.mp3",
                title: "Lech Lecha 8"
            },
        ];

        // Create the playlist from the JSON data
        jsonPlaylist.forEach((item, index) => {
            const li = document.createElement("li");
            const a = document.createElement("a");
            a.href = item.path;
            a.textContent = item.title;
            li.appendChild(a);
            playlist.appendChild(li);
            audioFiles.push(item.path);
        });

        function playTrack(trackIndex) {
            audioPlayer.src = audioFiles[trackIndex];
            audioPlayer.play();
            currentTrack = trackIndex;
            currentTrackElement.textContent = jsonPlaylist[currentTrack].title;
        }

        // Play the first track when the page loads
        playTrack(currentTrack);

        audioPlayer.addEventListener("ended", function () {
            // Play the next track when the current one ends
            currentTrack++;
            if (currentTrack < audioFiles.length) {
                playTrack(currentTrack);
            } else {
                // Loop back to the first track when the last track ends
                currentTrack = 0;
                playTrack(currentTrack);
            }

            // Stop auto play after the current track if the button is clicked
            if (!autoPlay) {
                audioPlayer.pause();
            }
        });

        playlist.addEventListener("click", function (e) {
            e.preventDefault();
            if (e.target.tagName === "A") {
                playTrack(Array.from(playlist.children).indexOf(e.target.parentElement));
            }
        });

        stopAutoPlayButton.addEventListener("click", function () {
            autoPlay = false;
        });
    </script>
</body>
</html>
